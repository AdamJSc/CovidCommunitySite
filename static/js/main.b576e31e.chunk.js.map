{"version":3,"sources":["components/Resource.js","helpers/formatAddress.js","pages/Home.js","App.js","serviceWorker.js","index.js"],"names":["styles","cardHeader","backgroundColor","paddingTop","paddingBottom","paddingLeft","paddingRight","borderBottom","Resource","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","callNumber","number","window","open","concat","openLink","link","_this2","_this$props","t","resource","formattedAddress","address","locale","components","name","street","city","postcode","map","component","filter","Boolean","join","formatAddress","react_default","a","createElement","Card","style","className","marginBottom","lineHeight","undefined","Button","onClick","bind","alignSelf","marginLeft","Body","index_es","marginRight","icon","faLocationArrow","Title","textTransform","subCategory","description","organisers","length","organiser","index","key","role","fontWeight","marginTop","links","url","variant","title","React","Component","defaultProps","withTranslation","Locales","require","Regions","Resources","CATEGORIES","container","border","borderRadius","App","regionId","region","find","location","hash","id","onCategorySelected","category","setState","onLocaleSelected","i18next","changeLanguage","error","onRegionSelected","handleSearchTermChanged","event","searchTerm","target","value","filterResources","resources","filteredResources","toConsumableArray","state","toUpperCase","indexOf","prevProps","_this3","Array","isArray","data","currentLocale","Navbar","bg","expand","Brand","href","Toggle","aria-controls","Collapse","Nav","activeKey","onSelect","Link","active","eventKey","NavDropdown","Item","updated","textAlign","color","time_ago","moment","duration","diff","humanize","Container","fluid","InputGroup","Prepend","Text","faSearch","FormControl","onChange","size","type","placeholder","DropdownButton","as","Append","Dropdown","components_Resource","withRouter","react_router","exact","path","render","routerProps","Home","hostname","match","i18n","use","initReactI18next","init","cy","translation","all","services","food","groceries","foodbank","laundry","regions","meals_on_wheels","restaurant","cafe","bakery","butchers","fishmonger","shop","hotel","tv","milkman","home","searchPlaceholder","en","lng","fallbackLng","interpolation","escapeValue","ReactDOM","react_router_dom","basename","process","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b576e31e.chunk.js","sourcesContent":["import React from 'react';\n\nimport PropTypes from \"prop-types\";\n\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLocationArrow } from '@fortawesome/free-solid-svg-icons';\nimport { formatAddress } from '../helpers/formatAddress';\n\nimport { withTranslation } from 'react-i18next';\n\nconst styles = {\n\tcardHeader: {\n\t\tbackgroundColor: 'rgba(0,0,0,0.03', \n\t\tpaddingTop: '0.75rem', \n\t\tpaddingBottom: '0.75rem', \n\t\tpaddingLeft: '1.25rem',\n\t\tpaddingRight: '1.25rem',\n\t\tborderBottom: '1px solid rgba(0,0,0,0.13)'\n\t}\n}\n\nclass Resource extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  callNumber = (number) => {\n  \twindow.open(`tel:${number}`);\n  };\n\n  openLink = (link) => {\n  \twindow.open(link, \"_blank\");\n  };\n\n  render() {\n  \tconst { t, resource } = this.props;\n  \tconst formattedAddress = formatAddress(resource.address, this.props.locale);\n    return (\n      <Card style={this.props.style}>\n      \t<div className=\"d-flex flex-row align-items-center justify-content-between\" style={styles.cardHeader}>\n      \t\t<h5 style={{marginBottom: 0, lineHeight: undefined}}>{typeof resource.name === \"string\" ? resource.name : resource.name[this.props.locale]}</h5>\n      \t\t{resource.number && (<Button onClick={this.callNumber.bind(this, resource.number)} style={{alignSelf: \"flex-end\", marginLeft: 12}}>{resource.number}</Button>)}\n      \t</div>\n      \t<Card.Body>\n      \t\t<p>\n      \t\t\t<FontAwesomeIcon style={{marginRight: 10}} icon={faLocationArrow}/>\n      \t\t\t{typeof resource.city === \"string\" ? resource.city : resource.city[this.props.locale]}\n      \t\t\t{formattedAddress && (\n      \t\t\t\t` - ${formattedAddress}`\n      \t\t\t)}\n      \t\t</p>\n      \t\t<hr/>\n      \t\t<Card.Title style={{textTransform: \"capitalize\"}}>{t(`subCategory.${resource.subCategory}`)}</Card.Title>\n      \t\t{resource.description && (<p>{resource.description[this.props.locale || \"en\"]}</p>)}\n      \t\t{resource.organisers && resource.organisers.length > 0 && (\n      \t\t\tresource.organisers.map((organiser, index) => {\n      \t\t\t\treturn (\n      \t\t\t\t\t<p key={index} style={{marginBottom: 0}}>\n      \t\t\t\t\t\t{organiser.name}\n      \t\t\t\t\t\t{organiser.role && ` - ${organiser.role[this.props.locale || \"en\"]}`}\n      \t\t\t\t\t\t{organiser.number && (\n      \t\t\t\t\t\t\t<span style={{fontWeight: '700'}}>: {'    ' + organiser.number}</span>\n      \t\t\t\t\t\t)}\n      \t\t\t\t\t</p>\n      \t\t\t\t)\n      \t\t\t})\n      \t\t)}\n      \t\t<div style={{marginTop: 12}}>\n      \t\t{resource.links && resource.links.length > 0 && (\n      \t\t\tresource.links.map((link, index) => {\n      \t\t\t\treturn (\n      \t\t\t\t\t<Button key={index} onClick={this.openLink.bind(this, link.url)} variant={\"secondary\"}>{link.title[this.props.locale || \"en\"]}</Button>\n      \t\t\t\t)\n      \t\t\t})\n      \t\t)}\n      \t\t</div>\n      \t</Card.Body>\n      </Card>\n    )\n  }\n}\n\nResource.defaultProps = {\n\n}\n\nResource.propTypes = {\n  resource: PropTypes.any,\n  locale: PropTypes.string\n}\n\nexport default withTranslation()(Resource);\n","export function formatAddress(address, locale) {\n\tif (!address) {\n\t\treturn null;\n\t}\n\tvar components = [address.name, address.street, address.city, address.postcode];\n\tcomponents = components.map(component => {\n\t\tif (typeof component === \"string\") {\n\t\t\treturn component;\n\t\t} else if (!!component) {\n\t\t\treturn component[locale || \"en\"];\n\t\t}\n\t});\n\tvar filteredComponents = components.filter(Boolean);\n\treturn filteredComponents.join(\", \");\n}"," import React from 'react';\n\nimport Container from 'react-bootstrap/Container';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport FormControl from 'react-bootstrap/FormControl';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport NavDropdown from 'react-bootstrap/NavDropdown';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\n\nimport { withRouter } from \"react-router\";\n\nimport Resource from \"../components/Resource\";\n\nimport { withTranslation } from 'react-i18next';\nimport i18next from \"i18next\";\n\nimport moment from \"moment\";\n\nconst Locales = require('../constants/locales.json');\nconst Regions = require('../constants/regions.json');\nconst Resources = require('../constants/resources.json');\n\nconst capitalize = (s) => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nconst CATEGORIES = [\n  \"food\",\n  \"foodbank\",\n  \"groceries\",\n  \"laundry\",\n  \"services\"\n]\n\nconst styles = {\n  container: {\n    backgroundColor: 'white',\n    border:'2px solid #ececec',\n    borderRadius: 4,\n    marginTop: 20,\n    paddingBottom: 12,\n    paddingTop: 12\n  }\n}\n\nclass App extends React.Component {\n\n  constructor(props) {\n    let regionId = null;\n    let region = Regions.find(region => {\n      return props.location.hash === `#${region.id}`\n    });\n    if (region) {\n      regionId = region.id;\n    }\n    super(props);\n    this.state = {\n      category: null,\n      locale: Locales[0].id,\n      regionId,\n      searchTerm: \"\"\n    }\n  }\n\n  onCategorySelected = (category) => {\n    this.setState({\n      category: category == \"_all_\" ? null : category\n    });\n  };\n\n  onLocaleSelected = (locale) => {\n    i18next.changeLanguage(locale, (error, t) => {\n      if (!error) {\n        this.setState({\n          locale\n        });\n      }\n    })\n  }\n\n  onRegionSelected = (regionId) => {\n    this.setState({\n      regionId: regionId == \"_all_\" ? null : regionId\n    });\n  };\n\n  handleSearchTermChanged = (event) => {\n    this.setState({\n      searchTerm: event.target.value\n    });\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.location.hash !== this.props.location.hash) {\n      if (this.props.location.hash === \"\") {\n        this.setState({\n          regionId: null\n        });\n      } else {\n        let region = Regions.find(region => {\n          return this.props.location.hash === `#${region.id}`\n        });\n        if (region) {\n          this.setState({\n            regionId: region.id\n          })\n        }\n      }\n    }\n  }\n\n  filterResources = (resources) => {\n\n    const { t } = this.props;\n    let filteredResources = [...resources];\n    const searchTerm = this.state.searchTerm.toUpperCase();\n\n    filteredResources = filteredResources.filter(resource => {\n      if (this.state.regionId && this.state.regionId != resource.regionId) {\n        return false;\n      }\n      if (this.state.category && this.state.category != resource.category) {\n        return false;\n      }\n      if (!searchTerm || searchTerm === \"\") {\n        return true;\n      }\n      const name = typeof resource.name === \"string\" ? resource.name : resource.name[this.state.locale];\n      const city = typeof resource.city === \"string\" ? resource.city : resource.city[this.state.locale];\n      const category = t(`category.${resource.category}`);\n      const subCategory = t(`subCategory.${resource.subCategory}`)\n      const description = !!resource.description ? resource.description[this.state.locale] : null;\n      return name.toUpperCase().indexOf(searchTerm) > -1 \n            || (description && description.toUpperCase().indexOf(searchTerm) > -1)\n            || (city && city.toUpperCase().indexOf(searchTerm) > -1)\n            || (category && category.toUpperCase().indexOf(searchTerm)> - 1)\n            || (subCategory && subCategory.toUpperCase().indexOf(searchTerm)> - 1);\n    });\n\n    return filteredResources;\n  }\n\n  render() {\n    const { t } = this.props;\n    const resources = this.filterResources(Array.isArray(Resources) ? Resources : Resources.data);\n    const currentLocale = Locales.find(locale => locale.id === this.state.locale);\n    return (\n      <div className=\"App\">\n        <Navbar bg=\"primary\" variant=\"dark\" expand=\"lg\">\n          <Navbar.Brand href=\"/\">{t('home.title', )}</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n          <Navbar.Collapse id=\"responsive-navbar-nav\">\n            <Nav \n              activeKey={this.state.regionId} \n              className=\"mr-auto\"\n              onSelect={this.onRegionSelected}\n            >\n              <Nav.Link\n                active={!this.state.regionId}\n                eventKey={\"_all_\"}\n              >\n              {t('regions.all')}\n              </Nav.Link>\n              {Regions.map((region, index) => {\n                return (\n                  <Nav.Link\n                    key={index}\n                    eventKey={region.id}\n                    href={`#${region.id}`}\n                  >\n                    {typeof region.name === \"string\" ? region.name : region.name[this.state.locale]}\n                  </Nav.Link>\n                )\n              })}\n            </Nav>\n            {Locales.length > 1 && (\n              <Nav onSelect={this.onLocaleSelected}>\n                <NavDropdown active title={currentLocale.name} id=\"collasible-nav-dropdown\">\n                  {Locales.map((locale, index) => <NavDropdown.Item eventKey={locale.id} key={index}>{locale.name}</NavDropdown.Item>)}\n                </NavDropdown>\n              </Nav>\n            )}\n            \n          </Navbar.Collapse>\n        </Navbar>\n        {Resources.updated && (<p style={{textAlign: \"center\", marginTop: 16, color: \"#6C757D\"}}>{t('home.updated', { time_ago: moment.duration(moment(Resources.updated).diff(moment())).humanize(true) }) }</p>)}\n        <Container style={styles.container} fluid=\"md\">\n          <InputGroup>\n            <InputGroup.Prepend>\n              <InputGroup.Text>\n                <FontAwesomeIcon icon={faSearch}/>\n              </InputGroup.Text>\n            </InputGroup.Prepend>\n            <FormControl value={this.state.searchTerm} onChange={this.handleSearchTermChanged} size=\"lg\" type=\"text\" placeholder=\"Search by name, town, or category\" />\n            <DropdownButton\n              as={InputGroup.Append}\n              onSelect={this.onCategorySelected}\n              title={!!this.state.category ? t(`category.${this.state.category}`) : t('category.all')}\n              variant={\"secondary\"}\n            >\n              <Dropdown.Item eventKey={\"_all_\"}>{t('category.all')}</Dropdown.Item>\n              {CATEGORIES.map((category, index) => {\n                return (\n                  <Dropdown.Item key={index} eventKey={category}>{t(`category.${category}`)}</Dropdown.Item>\n                )\n              })}\n            </DropdownButton>\n          </InputGroup>\n        </Container>\n        <Container fluid=\"md\" style={{marginTop: 22}}>\n          {resources.map((resource, index) => {\n            return (\n              <Resource\n                key={index}\n                locale={this.state.locale}\n                resource={resource}\n                style={{marginBottom: 24}}\n              />\n            )\n          })\n        }\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default withTranslation()(withRouter(App));\n","import React, { Component } from 'react';\nimport './App.css';\nimport { Route } from 'react-router-dom';\nimport Home from './pages/Home';\n\nclass App extends Component {\n\n  render() {\n    return (\n      <div>\n        <Route exact path={`/`} render={ (routerProps) => <Home routerProps={routerProps} />} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\n\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\n\ni18n\n    .use(initReactI18next) // passes i18n down to react-i18next\n    .init({\n        resources: {\n        \tcy: {\n                translation: {\n                \tcategory: {\n\t            \t\tall: \"Bob\",\n\t            \t\tservices: \"Gwasanaethau\",\n\t            \t\tfood: \"Bwyd\",\n\t            \t\tgroceries: \"Bwydydd\",\n\t            \t\tfoodbank: \"Banc Bwyd\",\n\t            \t\tlaundry: \"Golchdy\"\n\t            \t},\n                \tregions: {\n                \t\tall: \"Bob\"\n                \t},\n                \tsubCategory: {\n                \t\tmeals_on_wheels: \"Pryd ar Glud\",\n                \t\trestaurant: \"Bwyty\",\n                \t\tcafe: \"Caffi\",\n                \t\tbakery: \"Pobydd\",\n                \t\tbutchers: \"Cigyddion\",\n                \t\tfishmonger: \"Pysgod\",\n                \t\tlaundry: \"Golchdy\",\n                \t\tshop: \"Siop\",\n                \t\tfoodbank: \"Banc Bwyd\",\n                \t\thotel: \"Gwesty\",\n                \t\ttv: \"Teledu\",\n                \t\tmilkman: \"Dyn Llaeth\"\n                \t},\n                    home: {\n                    \tsearchPlaceholder: \"Search by name, town, or category\",\n                        title: \"Adnoddau Ceredigion\",\n                        updated: \"Last updated: {{time_ago}}\"\n                    }\n                }\n            },\n            en: {\n                translation: {\n                \tcategory: {\n\t            \t\tall: \"All\",\n\t            \t\tservices: \"Services\",\n\t            \t\tfood: \"Food\",\n\t            \t\tgroceries: \"Groceries\",\n\t            \t\tfoodbank: \"Foodbank\",\n\t            \t\tlaundry: \"Laundry\"\n\t            \t},\n                \tregions: {\n                \t\tall: \"All\"\n                \t},\n                \tsubCategory: {\n                \t\tmeals_on_wheels: \"Meals on Wheels\",\n                \t\trestaurant: \"Restaurant\",\n                \t\tbakery: \"Bakery\",\n                \t\tcafe: \"Café\",\n                \t\tbutchers: \"Butchers\",\n                \t\tfishmonger: \"Fishmonger\",\n                \t\tlaundry: \"Laundy\",\n                \t\tshop: \"Shop\",\n                \t\tfoodbank: \"Foodbank\",\n                \t\thotel: \"Hotel\",\n                \t\ttv: \"TV\",\n                \t\tmilkman: \"Milkman\"\n                \t},\n                    home: {\n                    \tsearchPlaceholder: \"Search by name, town, or category\",\n                        title: \"Ceredigion Resources\",\n                        updated: \"Last updated: {{time_ago}}\"\n                    }\n                }\n            }\n        },\n        lng: \"en\",\n        fallbackLng: \"en\",\n\n        interpolation: {\n            escapeValue: false\n        }\n    });\n\nReactDOM.render(<Router basename={process.env.PUBLIC_URL}><App/></Router>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}